<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Tam 12'den</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"crossorigin="anonymous"/>
        <link rel="stylesheet"href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
        <link rel="preconnect" href="https://fonts.gstatic.com" />
        <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
<style>
    .baslik{
    margin-left: 230px;
    font-size: 20px;
}
.büyükkutu{
    display: flex;
    justify-content: center;    
}
.kutu1{
    width: 505px;
	height: 500px;
	margin-right: 40px;
}
.kutu2{
    width: 505px;
	height: 500px;
	margin: 20px;
    justify-content: center;
}
.kullan{
    height: 120px;
    width: 250px;
}
.result-container {
    border: 4px solid rgb(209, 205, 205);
    width: 400px;
    height: 100px;
    border-radius: 10px;
    align-items: center;
    margin: auto;
}
.input-with-icon{
    border: 4px solid rgb(209, 205, 205);
    width: 400px;
    height: 100px;
    margin: auto;
    border-radius: 10px;
    align-items: center;
}
.ikonlar{
    width: 135px;
    height: 55px;
    display: flex;
    display: grid;
    grid-template-columns: repeat(3, 170px);
    grid-template-rows: repeat(2, 70px);
}
.altbaslik{
    margin-left: 15px;
    margin-top: 70px;
    margin-bottom: 30px;
}
.yazi{
    text-align: center;
    margin-top: 80px;
}
.ikincibüyükkutu{
    width: 1000px;
	height: 400px;
    margin: auto;    
}
.container {
    display: grid;
    grid-template-columns: repeat(2, 385px);
    grid-template-rows: repeat(3, 110px);
    margin-top: 3%;
    justify-content: center; /* Container'ı yatayda ortalamak için */
}
.box {
    display: flex;
    flex-direction:row; /* İç içe div'lerin dikey olarak hizalanması için */
    align-items: center; /* İç içe div'lerin yatayda ortalanması için */
    border-radius: 10px;
    border: 4px solid #ee91cf;
    margin: 5px;
    padding: 10px 30px;
}
.inner-box {
    margin-top: 10px;
    margin-bottom: 10px; /* Boşluk eklemek için */
    margin-left: 50px;
}
.sekil {
    border-radius: 10px;
    width: 70px;
    height: auto;
    align-items: center;
}
header {
    box-shadow: 0px -2px 9px 0px #0000008c;
    position: fixed;
    z-index: 999;
    background: white;
    width: 100%;
 }
 /* menü kısmı*/
 .anakisim{
    margin-left: 150px;
 }
 .biçimlendirme{
    font-weight: bold;
 }
 .biçimlendirme2{
    margin-top: 5px;
    margin-right: 100px;
    word-spacing: 10px;
 }
 .navbar-brand { /* skycoin yazısının ortalı olmasını sağlar */
    padding-top: 0.2125rem;
 }
 .dropdown:hover .dropdown-menu { /* menü altı menü şıklarının görünmesini sağlıyor */
    display: block;
 }
 a.nav-link { /* üst çubuk font ve yazı tipi */
    font-size: 14px;
    font-family: Roboto !important;
    font-weight: 600 !important;
    letter-spacing: 0.05em !important;
 }
 .nav-list { /* menü altındaki menünün yerini belirler */
    position: relative !important;
 }
 .dropdown {  /* üst çubuk kelimeler arası boşluk */
    padding: 0.8rem;
    position: unset;
 }
 .dropdown-menu {
    min-width: 200px;
    margin: 0;
    border: 0;
    border-radius: 0;
    box-shadow: 0 5px 40px rgba(0, 0, 0, 0.15);
    animation-name: slideAnimation;
    animation-duration: 0.4s;
    animation-timing-function: ease-in-out;
    animation-fill-mode: backwards;
 }
 /* menü kısmı sonu*/
 /*footer- son kısım*/
.birinci {
    text-align: center;
    margin-top: 15px;
 }
 .ikinci {
    text-align: center;
    margin-top: 20px;
    font-size: 13px;
 }
 footer {
    background: #ee91cf;
    margin-top: 50px;
    padding: 10px;
    color: #fff;
 }
 /*footer-son kısım sonu*/
.header-reset {
    height: 100px;
 }
 a,
 a:hover {
    color: #000;
 }
 a:hover {
    text-decoration: none !important;
    color: #ee91cf !important;
 }
 
 ::selection {
    background-color: #ee91cf;
    color: #fff;
 }
 .cüzdan{
   width: 40px;
   height: 40px;
}

.game-container {
  display: flex;
  flex-direction: column;
  align-items: center;
}

#dartboard {
  border: 0px solid;
  cursor: crosshair;
}

button {
  margin-top: 20px;
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
}

.game-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
}

.biçimlendirme2 {
    display: flex;
    align-items: center;
}
.biçimlendirme2 form,
.biçimlendirme2 button {
    margin-right: 10px; /* Butonlar arası boşluk */
}

</style>
        <!-- FONTS -->
        <link rel="preconnect" href="https://fonts.gstatic.com" />
        <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap"rel="stylesheet"/>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"rel="stylesheet"/>
    </head>
    <body>
        <header>
        <div class="anakisim">
            <a href="#"><div class="logo"></div></a>
            <!-- üst gezinti çubuğu -->
            <div class="navbar navbar-expand-lg">
                <a class="navbar-brand" href="/log_anasayfa">SKYCOİN</a>
                    <div class="collapse navbar-collapse">
                        <ul class="navbar-nav mr-auto">
                            <!-- Üst menü -->
                            <li class="nav-item dropdown nav-list">
                                <a class="biçimlendirme">AL/SAT</a>
                                <div class="dropdown-menu">
                                    <ul class="list-unstyled p-3">
                                            <a class="" href="/log_al"><i class="fa fa-caret-right pl-1 pr-3"></i>Al</a>
                                            <br>
                                            <a class="" href="/log_Sat"><i class="fa fa-caret-right pl-1 pr-3"></i>Sat</a>
                                    </ul>
                                </div>
                            </li>
                            <li class="nav-item dropdown nav-list">
                                <a href="/log_piyasa" class="biçimlendirme">PİYASALAR</a>
                            </li>
                            <li class="nav-item dropdown nav-list">
                                <a href="/log_kazan" class="biçimlendirme">OYNA KAZAN</a>
                                    <div class="dropdown-menu">
                                        <div class="row no-gutters p-4">
                                            <ul class="list-unstyled">
                                                    <a class="" href="/log_asmaca"><i class="fa fa-caret-right pl-1 pr-3"></i>Adam Asmaca</a><br>
                                                    <a class="" href="/log_12den"><i class="fa fa-caret-right pl-1 pr-3"></i>Tam 12'den</a><br>
                                                    <a class="" href="/log_hkarti"><i class="fa fa-caret-right pl-1 pr-3"></i>Hafıza Kartı</a>
                                            </ul>
                                        </div>
                                    </div>
                            </li>
                        </ul>
                        <!-- Giriş/Kaydol -->
                        <ul class="biçimlendirme2">

                            <form action="/cikis" method="post">
                                <button type="submit">Çıkış Yap</button>
                            </form>
                        
                           
                            <button id="cuzdanButonu" type="button">Cuzdan</button>
                        
                            
                        </ul>
                    </div>
            </div>
            <!-- üst gezinti çubuğu sonu -->
        </div>
    </header>
        <!-- üst gezinti çubuğu sonu -->
        <play>
            <div class="header-reset"></div>
            <div class="game-container">
                <h2 id="score">Skor: 0</h2>
                <canvas id="dartboard" width="500" height="500"></canvas>
                <button id="reset">Tahtayı Sıfırla</button>
            </div>
            <script>
              const canvas = document.getElementById('dartboard');
const ctx = canvas.getContext('2d');
const resetButton = document.getElementById('reset');
const scoreElement = document.getElementById('score');

const primeNumbers = [2, 3, 5, 7, 11];
let score = 0;

function drawDartboard() {
    const colors = ['#ee91cf', '#fff'];
    const radius = [250, 200, 150, 100, 50];

    for (let i = 0; i < radius.length; i++) {
        ctx.beginPath();
        ctx.arc(250, 250, radius[i], 0, 2 * Math.PI);
        ctx.fillStyle = colors[i % 2];
        ctx.fill();
        ctx.lineWidth = 2;
        ctx.strokeStyle = '#000';
        ctx.stroke();

        ctx.font = '20px Arial';
        ctx.fillStyle = colors[(i + 1) % 2];
        ctx.fillText(primeNumbers[i], 250 - 5, 250 - radius[i] + 20);
    }
}

const targetElement = document.createElement('h2');
targetElement.style.marginTop = '10px';
scoreElement.parentNode.insertBefore(targetElement, scoreElement.nextSibling);

function generateTarget() {
    let target = 0;
    for (let i = 0; i < primeNumbers.length; i++) {
        target += primeNumbers[i] * Math.floor(Math.random() * 3);
    }
    targetElement.textContent = `Hedef: ${target}`;
    return target;
}

let target = generateTarget();

function resetGame() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawDartboard();
    score = 0;
    scoreElement.textContent = `Skor: ${score}`;
    target = generateTarget();
}

function checkWinOrLose() {
    if (score === target) {
        targetElement.textContent = 'Kazandınız!';
        targetElement.style.color = 'green';
        targetElement.style.fontSize = '24px';
        setTimeout(function() {
            // AJAX isteği gönderelim
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/kazandin", true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    console.log(xhr.responseText);
                }
            };
            xhr.send(JSON.stringify({}));
            
            // Oyunu yeniden başlatmak için
            resetGame();
        }, 3000);
    } else if (score > target) {
        targetElement.textContent = 'Kaybettiniz!';
        targetElement.style.color = 'red';
        targetElement.style.fontSize = '24px';
        setTimeout(resetGame, 3000);
    }
}

// Dartboard'a tıklama işlemi
canvas.addEventListener('click', (e) => {
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;

    ctx.beginPath();
    ctx.arc(x, y, 5, 0, 2 * Math.PI);
    ctx.fillStyle = '#ec4fb8';
    ctx.fill();

    const dx = x - 250;
    const dy = y - 250;
    const distance = Math.sqrt(dx * dx + dy * dy);

    for (let i = 0; i < primeNumbers.length; i++) {
        if (distance <= (i + 1) * 50 && distance > i * 50) {
            score += primeNumbers[primeNumbers.length - 1 - i]; 
            scoreElement.textContent = `Skor: ${score}`;
            checkWinOrLose();
            console.log(score);
            break;
        }
    }
});

resetButton.addEventListener('click', resetGame);

drawDartboard();

 
            </script>
<script>
    document.getElementById("cuzdanButonu").addEventListener("click", function() {
        window.location.href = "/wallet";
    });
</script>
        </play>
        <!-- en alt kısım -->
        <footer>
            <div class="bitiş">
                <div class="birinci">
                    <h2>Hayallerinizin Dünyası</h2>
                </div>
                <div>
                    <p class="ikinci">Skycoin©2023</p>
                </div>
        </footer>
        <!-- en alt kısım sonu-->
    </body>
</html>
